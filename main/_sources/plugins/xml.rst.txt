.. Document meta

:orphan:

.. |antsibull-internal-nbsp| unicode:: 0xA0
    :trim:

.. meta::
  :antsibull-docs: 2.21.0

.. Anchors

.. _ansible_collections.middleware_automation.common.xml_module:

.. Anchors: short name for ansible.builtin

.. Title

xml -- Manage bits and pieces of XML files or strings
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

.. Collection note

.. note::
    This module is part of the `middleware_automation.common collection <https://galaxy.ansible.com/ui/repo/published/middleware_automation/common/>`_.

    It is not included in ``ansible-core``.
    To check whether it is installed, run :code:`ansible-galaxy collection list`.

    To install it, use: :code:`ansible\-galaxy collection install middleware\_automation.common`.
    You need further requirements to be able to use this module,
    see :ref:`Requirements <ansible_collections.middleware_automation.common.xml_module_requirements>` for details.

    To use it in a playbook, specify: :code:`middleware_automation.common.xml`.

.. version_added


.. contents::
   :local:
   :depth: 1

.. Deprecated


Synopsis
--------

.. Description

- A customized version of community.general.xml dedicated to runtimes configuration xpath/xslt.


.. Aliases


.. Requirements

.. _ansible_collections.middleware_automation.common.xml_module_requirements:

Requirements
------------
The below requirements are needed on the host that executes this module.

- lxml \>= 3.0.0






.. Options

Parameters
----------

.. raw:: html

  <table class="colwidths-auto ansible-option-table docutils align-default" style="width: 100%">
  <thead>
  <tr class="row-odd">
    <th class="head"><p>Parameter</p></th>
    <th class="head"><p>Comments</p></th>
  </tr>
  </thead>
  <tbody>
  <tr class="row-even">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-add_children"></div>
      <p class="ansible-option-title"><strong>add_children</strong></p>
      <a class="ansibleOptionLink" href="#parameter-add_children" title="Permalink to this option"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">list</span>
        / <span class="ansible-option-elements">elements=any</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>Add additional child-element(s) to a selected element for a given <em>xpath</em>.</p>
      <p>Child elements must be given in a list and each item may be either a string (eg. <code class='docutils literal notranslate'>children=ansible</code> to add an empty <code class='docutils literal notranslate'>&lt;ansible/&gt;</code> child element), or a hash where the key is an element name and the value is the element value.</p>
      <p>This parameter requires <em>xpath</em> to be set.</p>
    </div></td>
  </tr>
  <tr class="row-odd">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-attribute"></div>
      <p class="ansible-option-title"><strong>attribute</strong></p>
      <a class="ansibleOptionLink" href="#parameter-attribute" title="Permalink to this option"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">any</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>The attribute to select when using parameter <em>value</em>.</p>
      <p>This is a string, not prepended with <code class='docutils literal notranslate'>@</code>.</p>
    </div></td>
  </tr>
  <tr class="row-even">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-backup"></div>
      <p class="ansible-option-title"><strong>backup</strong></p>
      <a class="ansibleOptionLink" href="#parameter-backup" title="Permalink to this option"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">boolean</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>Create a backup file including the timestamp information so you can get the original file back if you somehow clobbered it incorrectly.</p>
      <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p>
      <ul class="simple">
        <li><p><code class="ansible-value literal notranslate ansible-option-default-bold"><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
        <li><p><code class="ansible-value literal notranslate ansible-option-choices-entry">true</code></p></li>
      </ul>

    </div></td>
  </tr>
  <tr class="row-odd">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-content"></div>
      <p class="ansible-option-title"><strong>content</strong></p>
      <a class="ansibleOptionLink" href="#parameter-content" title="Permalink to this option"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">string</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>Search for a given <em>xpath</em> and get content.</p>
      <p>This parameter requires <em>xpath</em> to be set.</p>
      <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p>
      <ul class="simple">
        <li><p><code class="ansible-value literal notranslate ansible-option-choices-entry">&#34;attribute&#34;</code></p></li>
        <li><p><code class="ansible-value literal notranslate ansible-option-choices-entry">&#34;text&#34;</code></p></li>
      </ul>

    </div></td>
  </tr>
  <tr class="row-even">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-count"></div>
      <p class="ansible-option-title"><strong>count</strong></p>
      <a class="ansibleOptionLink" href="#parameter-count" title="Permalink to this option"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">boolean</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>Search for a given <em>xpath</em> and provide the count of any matches.</p>
      <p>This parameter requires <em>xpath</em> to be set.</p>
      <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p>
      <ul class="simple">
        <li><p><code class="ansible-value literal notranslate ansible-option-default-bold"><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
        <li><p><code class="ansible-value literal notranslate ansible-option-choices-entry">true</code></p></li>
      </ul>

    </div></td>
  </tr>
  <tr class="row-odd">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-input_type"></div>
      <p class="ansible-option-title"><strong>input_type</strong></p>
      <a class="ansibleOptionLink" href="#parameter-input_type" title="Permalink to this option"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">string</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>Type of input for <em>add_children</em> and <em>set_children</em>.</p>
      <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p>
      <ul class="simple">
        <li><p><code class="ansible-value literal notranslate ansible-option-choices-entry">&#34;xml&#34;</code></p></li>
        <li><p><code class="ansible-value literal notranslate ansible-option-default-bold"><strong>&#34;yaml&#34;</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
      </ul>

    </div></td>
  </tr>
  <tr class="row-even">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-insertafter"></div>
      <p class="ansible-option-title"><strong>insertafter</strong></p>
      <a class="ansibleOptionLink" href="#parameter-insertafter" title="Permalink to this option"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">boolean</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>Add additional child-element(s) after the last selected element for a given <em>xpath</em>.</p>
      <p>Child elements must be given in a list and each item may be either a string (eg. <code class='docutils literal notranslate'>children=ansible</code> to add an empty <code class='docutils literal notranslate'>&lt;ansible/&gt;</code> child element), or a hash where the key is an element name and the value is the element value.</p>
      <p>This parameter requires <em>xpath</em> to be set.</p>
      <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p>
      <ul class="simple">
        <li><p><code class="ansible-value literal notranslate ansible-option-default-bold"><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
        <li><p><code class="ansible-value literal notranslate ansible-option-choices-entry">true</code></p></li>
      </ul>

    </div></td>
  </tr>
  <tr class="row-odd">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-insertbefore"></div>
      <p class="ansible-option-title"><strong>insertbefore</strong></p>
      <a class="ansibleOptionLink" href="#parameter-insertbefore" title="Permalink to this option"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">boolean</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>Add additional child-element(s) before the first selected element for a given <em>xpath</em>.</p>
      <p>Child elements must be given in a list and each item may be either a string (eg. <code class='docutils literal notranslate'>children=ansible</code> to add an empty <code class='docutils literal notranslate'>&lt;ansible/&gt;</code> child element), or a hash where the key is an element name and the value is the element value.</p>
      <p>This parameter requires <em>xpath</em> to be set.</p>
      <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p>
      <ul class="simple">
        <li><p><code class="ansible-value literal notranslate ansible-option-default-bold"><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
        <li><p><code class="ansible-value literal notranslate ansible-option-choices-entry">true</code></p></li>
      </ul>

    </div></td>
  </tr>
  <tr class="row-even">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-namespaces"></div>
      <p class="ansible-option-title"><strong>namespaces</strong></p>
      <a class="ansibleOptionLink" href="#parameter-namespaces" title="Permalink to this option"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">dictionary</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>The namespace <code class='docutils literal notranslate'>prefix:uri</code> mapping for the XPath expression.</p>
      <p>Needs to be a <code class='docutils literal notranslate'>dict</code>, not a <code class='docutils literal notranslate'>list</code> of items.</p>
      <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code class="ansible-value literal notranslate ansible-option-default">{}</code></p>
    </div></td>
  </tr>
  <tr class="row-odd">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-path"></div>
      <div class="ansibleOptionAnchor" id="parameter-dest"></div>
      <div class="ansibleOptionAnchor" id="parameter-file"></div>
      <p class="ansible-option-title"><strong>path</strong></p>
      <a class="ansibleOptionLink" href="#parameter-path" title="Permalink to this option"></a>
      <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: dest, file</span></p>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">path</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>Path to the file to operate on.</p>
      <p>This file must exist ahead of time.</p>
      <p>This parameter is required, unless <em>xmlstring</em> is given.</p>
    </div></td>
  </tr>
  <tr class="row-even">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-pretty_print"></div>
      <p class="ansible-option-title"><strong>pretty_print</strong></p>
      <a class="ansibleOptionLink" href="#parameter-pretty_print" title="Permalink to this option"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">boolean</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>Pretty print XML output.</p>
      <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p>
      <ul class="simple">
        <li><p><code class="ansible-value literal notranslate ansible-option-default-bold"><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
        <li><p><code class="ansible-value literal notranslate ansible-option-choices-entry">true</code></p></li>
      </ul>

    </div></td>
  </tr>
  <tr class="row-odd">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-print_match"></div>
      <p class="ansible-option-title"><strong>print_match</strong></p>
      <a class="ansibleOptionLink" href="#parameter-print_match" title="Permalink to this option"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">boolean</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>Search for a given <em>xpath</em> and print out any matches.</p>
      <p>This parameter requires <em>xpath</em> to be set.</p>
      <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p>
      <ul class="simple">
        <li><p><code class="ansible-value literal notranslate ansible-option-default-bold"><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
        <li><p><code class="ansible-value literal notranslate ansible-option-choices-entry">true</code></p></li>
      </ul>

    </div></td>
  </tr>
  <tr class="row-even">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-set_children"></div>
      <p class="ansible-option-title"><strong>set_children</strong></p>
      <a class="ansibleOptionLink" href="#parameter-set_children" title="Permalink to this option"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">list</span>
        / <span class="ansible-option-elements">elements=any</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>Set the child-element(s) of a selected element for a given <em>xpath</em>.</p>
      <p>Removes any existing children.</p>
      <p>Child elements must be specified as in <em>add_children</em>.</p>
      <p>This parameter requires <em>xpath</em> to be set.</p>
    </div></td>
  </tr>
  <tr class="row-odd">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-state"></div>
      <div class="ansibleOptionAnchor" id="parameter-ensure"></div>
      <p class="ansible-option-title"><strong>state</strong></p>
      <a class="ansibleOptionLink" href="#parameter-state" title="Permalink to this option"></a>
      <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: ensure</span></p>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">string</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>Set or remove an xpath selection (node(s), attribute(s)).</p>
      <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p>
      <ul class="simple">
        <li><p><code class="ansible-value literal notranslate ansible-option-choices-entry">&#34;absent&#34;</code></p></li>
        <li><p><code class="ansible-value literal notranslate ansible-option-default-bold"><strong>&#34;present&#34;</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
      </ul>

    </div></td>
  </tr>
  <tr class="row-even">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-strip_cdata_tags"></div>
      <p class="ansible-option-title"><strong>strip_cdata_tags</strong></p>
      <a class="ansibleOptionLink" href="#parameter-strip_cdata_tags" title="Permalink to this option"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">boolean</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>Remove CDATA tags surrounding text values.</p>
      <p>Note that this might break your XML file if text values contain characters that could be interpreted as XML.</p>
      <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p>
      <ul class="simple">
        <li><p><code class="ansible-value literal notranslate ansible-option-default-bold"><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
        <li><p><code class="ansible-value literal notranslate ansible-option-choices-entry">true</code></p></li>
      </ul>

    </div></td>
  </tr>
  <tr class="row-odd">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-validate"></div>
      <p class="ansible-option-title"><strong>validate</strong></p>
      <a class="ansibleOptionLink" href="#parameter-validate" title="Permalink to this option"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">boolean</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>Perform schema validation of the XML input.</p>
      <p>This parameter requires <em>xsd_path</em> to be set.</p>
      <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p>
      <ul class="simple">
        <li><p><code class="ansible-value literal notranslate ansible-option-default-bold"><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
        <li><p><code class="ansible-value literal notranslate ansible-option-choices-entry">true</code></p></li>
      </ul>

    </div></td>
  </tr>
  <tr class="row-even">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-value"></div>
      <p class="ansible-option-title"><strong>value</strong></p>
      <a class="ansibleOptionLink" href="#parameter-value" title="Permalink to this option"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">any</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>Desired state of the selected attribute.</p>
      <p>Either a string, or to unset a value, the Python <code class='docutils literal notranslate'>None</code> keyword (YAML Equivalent, <code class='docutils literal notranslate'>null</code>).</p>
      <p>Elements default to no value (but present).</p>
      <p>Attributes default to an empty string.</p>
    </div></td>
  </tr>
  <tr class="row-odd">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-xmlstring"></div>
      <p class="ansible-option-title"><strong>xmlstring</strong></p>
      <a class="ansibleOptionLink" href="#parameter-xmlstring" title="Permalink to this option"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">string</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>A string containing XML on which to operate.</p>
      <p>This parameter is required, unless <em>path</em> is given.</p>
    </div></td>
  </tr>
  <tr class="row-even">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-xpath"></div>
      <p class="ansible-option-title"><strong>xpath</strong></p>
      <a class="ansibleOptionLink" href="#parameter-xpath" title="Permalink to this option"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">string</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>A valid XPath expression describing the item(s) you want to manipulate.</p>
      <p>Operates on the document root, <code class='docutils literal notranslate'>/</code>, by default.</p>
    </div></td>
  </tr>
  <tr class="row-odd">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="parameter-xsd_path"></div>
      <p class="ansible-option-title"><strong>xsd_path</strong></p>
      <a class="ansibleOptionLink" href="#parameter-xsd_path" title="Permalink to this option"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">path</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>Path to the xsd schema file to perform xml validation</p>
      <p>This file must exist ahead of time.</p>
      <p>This parameter is required when <em>validate</em> is true.</p>
    </div></td>
  </tr>
  </tbody>
  </table>



.. Attributes


.. Notes

Notes
-----

.. note::
   - Use the :literal:`\-\-check` and :literal:`\-\-diff` options when testing your expressions.
   - The diff output is automatically pretty\-printed, so may not reflect the actual file content, only the file structure.
   - This module does not handle complicated xpath expressions, so limit xpath selectors to simple expressions.
   - Beware that in case your XML elements are namespaced, you need to use the :emphasis:`namespaces` parameter, see the examples.
   - Namespaces prefix should be used for all children of an element where namespace is defined, unless another namespace is defined for them.

.. Seealso

See Also
--------

.. seealso::

   `Introduction to XPath <https://www.w3schools.com/xml/xpath_intro.asp>`_
       A brief tutorial on XPath (w3schools.com).
   `XPath Reference document <https://developer.mozilla.org/en-US/docs/Web/XPath>`_
       The reference documentation on XSLT/XPath (developer.mozilla.org).

.. Examples

Examples
--------

.. code-block:: yaml+jinja

    # Consider the following XML file:
    #
    # <business type="bar">
    #   <name>Tasty Beverage Co.</name>
    #     <beers>
    #       <beer>Rochefort 10</beer>
    #       <beer>St. Bernardus Abbot 12</beer>
    #       <beer>Schlitz</beer>
    #    </beers>
    #   <rating subjective="true">10</rating>
    #   <website>
    #     <mobilefriendly/>
    #     <address>http://tastybeverageco.com</address>
    #   </website>
    # </business>

    - name: Remove the 'subjective' attribute of the 'rating' element
      middleware_automation.common.xml:
        path: /foo/bar.xml
        xpath: /business/rating/@subjective
        state: absent

    - name: Set the rating to '11'
      middleware_automation.common.xml:
        path: /foo/bar.xml
        xpath: /business/rating
        value: 11

    # Retrieve and display the number of nodes
    - name: Get count of 'beers' nodes
      middleware_automation.common.xml:
        path: /foo/bar.xml
        xpath: /business/beers/beer
        count: true
      register: hits

    - ansible.builtin.debug:
        var: hits.count

    # Example where parent XML nodes are created automatically
    - name: Add a 'phonenumber' element to the 'business' element
      middleware_automation.common.xml:
        path: /foo/bar.xml
        xpath: /business/phonenumber
        value: 555-555-1234

    - name: Add several more beers to the 'beers' element
      middleware_automation.common.xml:
        path: /foo/bar.xml
        xpath: /business/beers
        add_children:
        - beer: Old Rasputin
        - beer: Old Motor Oil
        - beer: Old Curmudgeon

    - name: Add several more beers to the 'beers' element and add them before the 'Rochefort 10' element
      middleware_automation.common.xml:
        path: /foo/bar.xml
        xpath: '/business/beers/beer[text()="Rochefort 10"]'
        insertbefore: true
        add_children:
        - beer: Old Rasputin
        - beer: Old Motor Oil
        - beer: Old Curmudgeon

    # NOTE: The 'state' defaults to 'present' and 'value' defaults to 'null' for elements
    - name: Add a 'validxhtml' element to the 'website' element
      middleware_automation.common.xml:
        path: /foo/bar.xml
        xpath: /business/website/validxhtml

    - name: Add an empty 'validatedon' attribute to the 'validxhtml' element
      middleware_automation.common.xml:
        path: /foo/bar.xml
        xpath: /business/website/validxhtml/@validatedon

    - name: Add or modify an attribute, add element if needed
      middleware_automation.common.xml:
        path: /foo/bar.xml
        xpath: /business/website/validxhtml
        attribute: validatedon
        value: 1976-08-05

    # How to read an attribute value and access it in Ansible
    - name: Read an element's attribute values
      middleware_automation.common.xml:
        path: /foo/bar.xml
        xpath: /business/website/validxhtml
        content: attribute
      register: xmlresp

    - name: Show an attribute value
      ansible.builtin.debug:
        var: xmlresp.matches[0].validxhtml.validatedon

    - name: Remove all children from the 'website' element (option 1)
      middleware_automation.common.xml:
        path: /foo/bar.xml
        xpath: /business/website/*
        state: absent

    - name: Remove all children from the 'website' element (option 2)
      middleware_automation.common.xml:
        path: /foo/bar.xml
        xpath: /business/website
        set_children: []

    # In case of namespaces, like in below XML, they have to be explicitly stated.
    #
    # <foo xmlns="http://x.test" xmlns:attr="http://z.test">
    #   <bar>
    #     <baz xmlns="http://y.test" attr:my_namespaced_attribute="true" />
    #   </bar>
    # </foo>

    # NOTE: There is the prefix 'x' in front of the 'bar' element, too.
    - name: Set namespaced '/x:foo/x:bar/y:baz/@z:my_namespaced_attribute' to 'false'
      middleware_automation.common.xml:
        path: foo.xml
        xpath: /x:foo/x:bar/y:baz
        namespaces:
          x: http://x.test
          y: http://y.test
          z: http://z.test
        attribute: z:my_namespaced_attribute
        value: 'false'

    - name: Adding building nodes with floor subnodes from a YAML variable
      middleware_automation.common.xml:
        path: /foo/bar.xml
        xpath: /business
        add_children:
          - building:
              # Attributes
              name: Scumm bar
              location: Monkey island
              # Subnodes
              _:
                - floor: Pirate hall
                - floor: Grog storage
                - construction_date: "1990"  # Only strings are valid
          - building: Grog factory

    # Consider this XML for following example -
    #
    # <config>
    #   <element name="test1">
    #     <text>part to remove</text>
    #   </element>
    #   <element name="test2">
    #     <text>part to keep</text>
    #   </element>
    # </config>

    - name: Delete element node based upon attribute
      middleware_automation.common.xml:
        path: bar.xml
        xpath: /config/element[@name='test1']
        state: absent



.. Facts


.. Return values

Return Values
-------------
Common return values are documented :ref:`here <common_return_values>`, the following are the fields unique to this module:

.. raw:: html

  <table class="colwidths-auto ansible-option-table docutils align-default" style="width: 100%">
  <thead>
  <tr class="row-odd">
    <th class="head"><p>Key</p></th>
    <th class="head"><p>Description</p></th>
  </tr>
  </thead>
  <tbody>
  <tr class="row-even">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="return-actions"></div>
      <p class="ansible-option-title"><strong>actions</strong></p>
      <a class="ansibleOptionLink" href="#return-actions" title="Permalink to this return value"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">dictionary</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>A dictionary with the original xpath, namespaces and state.</p>
      <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p>
      <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code class="ansible-value literal notranslate ansible-option-sample">{&#34;namespaces&#34;: [&#34;namespace1&#34;, &#34;namespace2&#34;], &#34;state=present&#34;: null, &#34;xpath&#34;: &#34;xpath&#34;}</code></p>
    </div></td>
  </tr>
  <tr class="row-odd">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="return-backup_file"></div>
      <p class="ansible-option-title"><strong>backup_file</strong></p>
      <a class="ansibleOptionLink" href="#return-backup_file" title="Permalink to this return value"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">string</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>The name of the backup file that was created</p>
      <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> when <em>backup=true</em></p>
      <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code class="ansible-value literal notranslate ansible-option-sample">&#34;/path/to/file.xml.1942.2017-08-24@14:16:01~&#34;</code></p>
    </div></td>
  </tr>
  <tr class="row-even">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="return-count"></div>
      <p class="ansible-option-title"><strong>count</strong></p>
      <a class="ansibleOptionLink" href="#return-count" title="Permalink to this return value"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">integer</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>The count of xpath matches.</p>
      <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> when parameter &#x27;count&#x27; is set</p>
      <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code class="ansible-value literal notranslate ansible-option-sample">2</code></p>
    </div></td>
  </tr>
  <tr class="row-odd">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="return-matches"></div>
      <p class="ansible-option-title"><strong>matches</strong></p>
      <a class="ansibleOptionLink" href="#return-matches" title="Permalink to this return value"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">list</span>
        / <span class="ansible-option-elements">elements=string</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>The xpath matches found.</p>
      <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> when parameter &#x27;print_match&#x27; is set</p>
    </div></td>
  </tr>
  <tr class="row-even">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="return-msg"></div>
      <p class="ansible-option-title"><strong>msg</strong></p>
      <a class="ansibleOptionLink" href="#return-msg" title="Permalink to this return value"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">string</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>A message related to the performed action(s).</p>
      <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> always</p>
    </div></td>
  </tr>
  <tr class="row-odd">
    <td><div class="ansible-option-cell">
      <div class="ansibleOptionAnchor" id="return-xmlstring"></div>
      <p class="ansible-option-title"><strong>xmlstring</strong></p>
      <a class="ansibleOptionLink" href="#return-xmlstring" title="Permalink to this return value"></a>
      <p class="ansible-option-type-line">
        <span class="ansible-option-type">string</span>
      </p>
    </div></td>
    <td><div class="ansible-option-cell">
      <p>An XML string of the resulting output.</p>
      <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> when parameter &#x27;xmlstring&#x27; is set</p>
    </div></td>
  </tr>
  </tbody>
  </table>



..  Status (Presently only deprecated)


.. Authors

Authors
~~~~~~~

- Tim Bielawa (@tbielawa)
- Magnus Hedemark (@magnus919)
- Dag Wieers (@dagwieers)
- Guido Grazioli (@ggraziol)


.. Extra links


.. Parsing errors
